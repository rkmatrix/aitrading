services:
  # Dashboard Web Service
  - type: web
    name: aitradepro-api
    env: python
    buildCommand: pip install -r dashboard/requirements.txt
    # Use dashboard/app_render.py directly - works when Root Directory is empty
    # If Root Directory is set to dashboard/, use: python app_render.py
    startCommand: python dashboard/app_render.py
    healthCheckPath: /api/health
    envVars:
      - key: FLASK_ENV
        value: production

  # Trading Bot Background Worker
  - type: worker
    name: aitradingbot-worker
    env: python
    buildCommand: pip install -r requirements.txt
    startCommand: python runner/phase26_realtime_live.py
    envVars:
      - key: MODE
        value: PAPER
      - key: ENV
        value: PAPER
